Many computer vision and image processing operations have some potential for parallelism.  Indeed, a number of them can be regarded as \emph{embarrassingly parallel}.  That is, the process involves a considerable number of independent sub-process steps, and so those steps may safely be performed concurrently.  Some of those algorithms either are explicitly characterised in terms of message passing, such as \gls{sm} with \gls{bp} \cite{Liang2011} or semi-global matching \cite{Drory2014}, or could potentially be viewed as such, \eg{} \glspl{mwt} applied to images.

\Gls{medianfilter}ing \cite[Chap. 3.4.1]{Gimelfarb2018}, \cite{Fisher2016} is a \gls{mwt} operation in image processing used to remove random `salt \& pepper' noise from images.  Such noise is characterised by pixel colouration values at the extreme high and low ends of the range of possible values.  At its simplest, \gls{medianfilter}ing recovers an approximation of the non-noisy image by taking the median of all pixel values in a window around each pixel and creating a new image using said median values for the pixels.

Finding the median of a multiset is a well-known fundamental statistical operation.  Likely the way that many people were first taught to perform it was to sort the relevant multiset, count the relevant multiset, halve the count, and then take the number at that position in the multiset.  All of these operations individually, and other similar ones, are relatively simple in \gls{cps} when working with numeric terms (\ie{} terms holding multiplicities of the unary digit \(\cpundig\)).  Moreover, it is also simple to combine these operations into one overarching \gls{ruleset} to carry out the requisite process.

% This \namecref{chap:median} seeks to model \gls{medianfilter}ing using \gls{cps}, as another test of the power and versatility of \gls{cps}, a more intensive test of the utility of \gls{cml} for \gls{cps}, and to explore whether using \gls{cml} -- as a method of structuring computations around message passing -- could be beneficial when applied to a \gls{mwt}, using the \gls{medianfilter} as its particular example.  It starts by describing how to perform a variety of fundamental statistical operations with \gls{cps}, going from less complex to more complex, and re-using earlier ones as part of the implementation of later ones.  This builds up to performing selection -- taking the \(n^{\text{th}}\) element of a sorted multiset -- which can be used to implement the median operation.

This \namecref{chap:median} seeks to model \gls{medianfilter}ing using \gls{cps}, as:
\begin{inparaenum}[a)]
\item  another test of the power and versatility of \gls{cps};
\item a more intensive test of the utility of \gls{cml} for \gls{cps}; and,
\item to explore whether using \gls{cml} as a method of structuring computations around message passing could be beneficial when applied to a \gls{mwt}.
\end{inparaenum}
% using the \gls{medianfilter} as its particular example.
It starts by describing how to perform various fundamental statistical operations with \gls{cps}, going from less complex to more complex, and re-using earlier ones as part of later ones.  This builds up to performing selection -- taking the \(n^{\text{th}}\) element of a sorted multiset -- which can be used to implement the median operation.

Before moving to the \gls{cps} \gls{medianfilter} solution, several earlier works on applying \gls{mc} to image processing are summarised, providing background and context on this effort, though the current \namecref{chap:median} is the first known application of \gls{mc} directly to the \gls{medianfilter}.  Next, this \namecref{chap:median} demonstrates the combination of selection and counting to find the median of a multiset, with antiport message passing between pixels used to build up the multisets in each pixel.  Finally, three different practical implementations of \gls{medianfilter}ing are introduced and assessed.  The first implementation is a simple na√Øve approach, as many programmers might write; the second is a \gls{cml} one very closely connected to the \gls{cps} solution; while the third sits conceptually somewhere between the two and is based on work by \citeauthor{Braunl2001} \cite{Braunl2001}.  The focus in this final \namecref{sec:median:cpsmedianfilter} is on examining the potential benefit of using a different principle to structure the processing, as much as it is on the achieved image results.